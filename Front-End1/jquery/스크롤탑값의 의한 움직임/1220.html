<!DOCTYPE html
    PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <title>Test</title>
    <link rel="stylesheet" href="css/main.css">
    <script src="js/jquery-1.7.2.min.js"></script>
    <script src="js/jquery-ui.js"></script>
    <script src="js/jquery.easing.1.3.min.js"></script>

</head>

<body>
    <div id="wrap">

        <div id="con1">
            <div class="box1-1 box">box1-1</div>
            <div class="box1-2 box">box1-2</div>
            <div class="box1-3 box">box1-3</div>
        </div>
        <div id="con2">
            <div class="box2-1 box">box1-1</div>
            <div class="box2-2 box">box1-2</div>
            <div class="box2-3 box">box1-3</div>
        </div>
        <div id="con3">
            <div class="box3-1 box">box1-1</div>
            <div class="box3-2 box">box1-2</div>
            <div class="box3-3 box">box1-3</div>
        </div>
        <div id="con4"></div>
        <script>
            $(document).ready(function () {

                //스크롤은 한쪽 방향만 인식하기 때문에 따로 키값을 줌
                //부드럽게 만들기 위함
                let scene01Num = 1;
                let scene02Num = 1;
                let scene03Num = 1;


                //스크롤이 되었을 때
                $(window).scroll(function () {
                    let box11 = $(".box1-1");
                    let box12 = $(".box1-2");
                    let box13 = $(".box1-3");

                    let box21 = $(".box2-1");
                    let box22 = $(".box2-2");
                    let box23 = $(".box2-3");

                    let box31 = $(".box3-1");
                    let box32 = $(".box3-2");
                    let box33 = $(".box3-3");


                    //현재 화면에서의 스크롤 값을 변수에 저장
                    let sct = $(document).scrollTop();

                    // if => 스크롤이 내려갈 떄 , else if =>스크롤이 올라갈 때
                    if (sct > 200 && scene01Num == 1) {
                        scene01Num = 0;

                        //박스1-1이 움직인 후, 사라지는 애니메이션
                        box11
                            .delay(300)
                            .stop()
                            .animate({ opacity: 1, top: "800px" }, 1000, function () {
                                $(".box1-1").delay(200).stop().animate({ opacity: 0 }, 500);
                            });
                        box12
                            .delay(300)
                            .stop()
                            .animate({ opacity: 1, top: "800px" }, 1000, function () {
                                $(".box1-2").delay(200).stop().animate({ opacity: 0 }, 500);
                            });
                        box13
                            .delay(300)
                            .stop()
                            .css({ opacity: 0 })
                            .animate({ opacity: 0.7, left: "200px" }, 1000, function () {
                                $(".box1-3").delay(200).stop().animate({ opacity: 0 }, 500);
                            });
                    } else if (sct < 200 && scene01Num == 0) {
                        scene01Num = 1;
                        box11.delay(0).css({ top: "800px" }).stop().animate({ opacity: 1, top: "200px" }, 1000);
                        box12.delay(0).css({ top: "800px" }).stop().animate({ opacity: 1, top: "500px" }, 1000);
                        box13.delay(0).css({ opacity: 0.7 }).stop().animate({ opacity: 1, left: "1200px", top: "600px" }, 1000);
                    }

                    if (sct > 1200 && scene02Num == 1) {
                        scene02Num = 0;
                        box21.delay(0).stop().animate({ opacity: 1, top: "800px" }, 1000, function () {
                            box21.delay(200).stop().animate({ opacity: 0 }, 1000);
                        });
                        box22.delay(400).stop().animate({ opacity: 1, top: "800px" }, 1000, function () {
                            box22.delay(200).stop().animate({ opacity: 0 }, 1000);
                        });
                        box23.delay(800).stop().animate({ opacity: 1, top: "800px" }, 1000, function () {
                            box23.delay(200).stop().animate({ opacity: 0 }, 1000);
                        });

                    } else if (sct < 1200 && scene02Num == 0) {
                        scene02Num = 1;
                        box21.delay(0).css({ top: "800px" }).stop().animate({ opacity: 1, top: "200px" }, 1000);
                        box22.delay(400).css({ top: "800px" }).stop().animate({ opacity: 1, top: "500px" }, 1000);
                        box23.delay(800).css({ top: "800px" }).stop().animate({ opacity: 1, top: "700px" }, 1000);
                    }

                    //jQuery로는 한계가 있으니 addClass를 이용해서 여러 효과 적용하기
                    if (sct > 2000 && scene03Num == 1) {
                        scene03Num = 0;
                        box31.addClass("act1");
                        box32.addClass("act2");
                        box33.addClass("act3");
                    } else if (sct < 2000 && scene03Num == 0) {
                        scene03Num = 1;
                        box33.addClass("act3-0");
                    }



                });//end of $(window).scroll




            });//end of document ready

        </script>
    </div>

</body>

</html>